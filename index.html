<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Treinador de Senha Pedagógico - Moisés</title>
    <link rel="stylesheet" src="style.css">
    <style>
        @media only screen and (max-width: 600px) {    
            #app{
                display: flex;
                flex-direction: column;
                margin: auto;
                width: 80vw;
                text-align: center;
                margin: 16px;
                color: #444;
            }
            #idMensagem{
                color: darkgrey;
            }
            #divPontos{
                display: flex;
                flex-direction: row;
                text-align: center;
                justify-content: space-around;
                font-weight: lighter;
            }
            button{
                /*background-color: white;*/
                border: black;
                text-decoration: none;
            }

            button::-moz-focus-inner {
            border: 0;
            }

            .fade-enter-active, .fade-leave-active {
                transition: opacity .5s;
            }
            .fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {
                opacity: 0;
            }
        }
    </style>
    <script src="vue.js"></script>
    <script src="js.js"></script>
</head>
<body>

    <div id="app">
        <h3>Treinador da Senha para Novos Educadores</h3>
        <p>
            <transition name="fade">
                <span id="idMensagem">{{mensagem}}</span>
            </transition><br>
        </p>
        <div id="divSenhas">
            <input v-model="codigoSenha" v-on:change="geraTempo" placeholder="código da senha"><br>
            <span>{{minutos}}{{segundos}}</span><br>
            <input v-model="senhaInput" v-on:keyup.enter="verifica" placeholder="senha"><label id="resultado"></label>
        </div>
        
        <p>{{pontos}} pontos</p>
        <div id="divPontos">
            <p>{{erros}} erros</p>
            <p>{{acertos}} acertos</p>
        </div>
    </div>

    <script>
        var app = new Vue({
            el: '#app',
            data: {
                mensagem: 'Coloque o Código da Senha e aperte Enter ou TAB',
                minutos: '',
                segundos: '',
                senha: '',
                senhaInput: '',
                codigoSenha: '',
                pontos: 0,
                acertos: 0,
                erros: 0
            },
            methods: {

                geraTempo: function (message, event) {

                    retorno = geraTempoAleatorio();

                    this.minutos = retorno[0]+":";
                    this.segundos = retorno[1];
                    this.senha = retorno[2];
                    this.mensagem = '';
                    this.senhaInput = '';

                    //alert(retorno[2]); // verifica senha

                },
                verifica: function(message, event){
                    if (this.senhaInput == this.senha){
                        this.pontos++;
                        this.acertos++;
                        this.geraTempo();
                    }else{
                        this.pontos--;
                        this.erros++;
                        this.geraTempo();
                    }
                }
            }
        });

        function pad(num, size) {
            var s = num+"";
            while (s.length < size) s = "0" + s;
            return s;
        }

        geraTempoAleatorio = function(){
            var minutoGerado = Math.trunc(Math.random()*24);
            var segundoGerado = Math.trunc(Math.random()*59);
            var minuto = pad(minutoGerado,2);
            var segundo = pad(segundoGerado,2);
            var digitoMinuto = minuto[1];
            var digitoSegundo = segundo[0];
            var senha = new Number((new Number(digitoMinuto)*5).toString()) + 
                        new Number((new Number(digitoSegundo)+1).toString());
            senha = senha.toString() + app.codigoSenha.toString();
            var momento = [minuto, segundo, senha];
            return momento;
        }


    </script>
</body>
</html>